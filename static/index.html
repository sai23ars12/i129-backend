<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>I-129 Petition Questionnaire</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=IBM+Plex+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --navy:#0a1628;--navy2:#0f2040;--blue:#1a4db5;--blue2:#2563eb;
  --accent:#f59e0b;--accent2:#fbbf24;
  --line:#1e3a6e;--surface:#0d1f3c;--surface2:#162645;
  --text:#e2eaf8;--muted:#6b8ab0;--label:#94afd4;
  --input-bg:#0a1628;--input-border:#1e3a6e;--input-focus:#2563eb;
  --green:#10b981;--red:#ef4444;
}
html{font-size:15px}
body{font-family:'IBM Plex Sans',sans-serif;background:var(--navy);color:var(--text);min-height:100vh;line-height:1.5}
input,select,textarea{font-family:inherit;font-size:inherit}

.shell{display:grid;grid-template-columns:270px 1fr;min-height:100vh}
@media(max-width:860px){.shell{grid-template-columns:1fr}}

/* Sidebar */
.sidebar{background:var(--navy2);border-right:1px solid var(--line);padding:28px 0;position:sticky;top:0;height:100vh;overflow-y:auto}
@media(max-width:860px){.sidebar{display:none}}
.logo{padding:0 22px 24px;border-bottom:1px solid var(--line);margin-bottom:12px}
.logo-badge{display:inline-flex;align-items:center;gap:7px;background:var(--blue);padding:4px 10px;border-radius:4px;font-family:'IBM Plex Mono',monospace;font-size:10px;font-weight:600;color:#fff;letter-spacing:.5px;margin-bottom:10px}
.logo h1{font-size:13px;font-weight:700;color:var(--text)}
.logo p{font-size:11px;color:var(--muted);margin-top:2px}
.nav-item{display:flex;align-items:center;gap:9px;padding:8px 22px;cursor:pointer;border:none;background:none;width:100%;text-align:left;font-family:inherit;font-size:12px;color:var(--muted);transition:all .15s;border-left:2px solid transparent}
.nav-item:hover{background:var(--surface);color:var(--text)}
.nav-item.active{background:var(--surface);color:var(--accent);border-left-color:var(--accent);font-weight:600}
.nav-item.done{color:var(--label)}
.nav-check{margin-left:auto;color:var(--green);font-size:11px}
.nav-num{font-family:'IBM Plex Mono',monospace;font-size:10px;color:var(--muted);min-width:20px}
.nav-item.active .nav-num{color:var(--accent)}
.part-header{padding:10px 22px 4px;font-size:9.5px;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:1.8px;font-family:'IBM Plex Mono',monospace}

/* Main */
.main{padding:36px 44px;max-width:840px}
@media(max-width:860px){.main{padding:24px 18px}}

.progress-bar{height:3px;background:var(--line);border-radius:2px;overflow:hidden;margin-bottom:30px}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--blue2),var(--accent));transition:width .4s ease}

.step-header{margin-bottom:28px;padding-bottom:18px;border-bottom:1px solid var(--line)}
.step-badge{font-family:'IBM Plex Mono',monospace;font-size:9.5px;color:var(--accent);letter-spacing:2px;text-transform:uppercase;margin-bottom:6px}
.step-title{font-size:21px;font-weight:700;color:var(--text);letter-spacing:-.3px}
.step-sub{font-size:12.5px;color:var(--muted);margin-top:3px}

.section-title{font-size:9.5px;font-weight:700;text-transform:uppercase;letter-spacing:2px;color:var(--accent);font-family:'IBM Plex Mono',monospace;padding:7px 12px;background:rgba(245,158,11,.07);border-left:2px solid var(--accent);margin:24px 0 16px;border-radius:0 4px 4px 0}

.field{margin-bottom:14px}
.field-label{font-size:11px;font-weight:600;color:var(--label);margin-bottom:5px;display:flex;align-items:center;gap:4px;letter-spacing:.2px;line-height:1.4}
.req{color:var(--accent);font-size:14px;line-height:1}
.field-hint{font-size:10px;color:var(--muted);margin-bottom:5px;font-style:italic}
.inp{width:100%;padding:9px 11px;background:var(--input-bg);border:1.5px solid var(--input-border);border-radius:5px;color:var(--text);font-size:13px;transition:border-color .15s,box-shadow .15s;outline:none}
.inp:focus{border-color:var(--input-focus);box-shadow:0 0 0 3px rgba(37,99,235,.12)}
.inp::placeholder{color:#253d60}
select.inp{cursor:pointer}
select.inp option{background:var(--navy2)}

.grid{display:grid;gap:12px}
.g2{grid-template-columns:1fr 1fr}
.g3{grid-template-columns:1fr 1fr 1fr}
.g21{grid-template-columns:2fr 1fr}
.g12{grid-template-columns:1fr 2fr}
.g211{grid-template-columns:2fr 1fr 1fr}
.g121{grid-template-columns:1fr 2fr 1fr}
@media(max-width:580px){.g2,.g3,.g21,.g12,.g211,.g121{grid-template-columns:1fr}}

.radio-group{display:flex;border:1.5px solid var(--input-border);border-radius:5px;overflow:hidden}
.radio-opt{flex:1;position:relative}
.radio-opt input{position:absolute;opacity:0;width:0;height:0}
.radio-opt label{display:block;padding:8px 10px;text-align:center;font-size:12.5px;color:var(--muted);cursor:pointer;transition:all .15s;font-weight:500;white-space:nowrap}
.radio-opt input:checked+label{background:var(--blue2);color:#fff}
.radio-opt:not(:last-child){border-right:1px solid var(--input-border)}

.yn{display:flex;gap:8px}
.yn-btn{flex:1;padding:8px;border:1.5px solid var(--input-border);border-radius:5px;background:transparent;color:var(--muted);font-size:13px;cursor:pointer;transition:all .15s;font-family:inherit;font-weight:500}
.yn-btn:hover{border-color:var(--label)}
.yn-y{border-color:var(--green)!important;background:rgba(16,185,129,.1)!important;color:var(--green)!important}
.yn-n{border-color:var(--blue2)!important;background:rgba(37,99,235,.1)!important;color:#60a5fa!important}

.nav-btns{display:flex;justify-content:space-between;align-items:center;margin-top:32px;padding-top:22px;border-top:1px solid var(--line)}
.btn{padding:10px 24px;border-radius:6px;font-family:inherit;font-size:13px;font-weight:600;cursor:pointer;border:none;transition:all .15s;letter-spacing:.2px}
.btn-ghost{background:transparent;border:1.5px solid var(--line);color:var(--muted)}
.btn-ghost:hover{border-color:var(--label);color:var(--text)}
.btn-primary{background:var(--blue2);color:#fff;box-shadow:0 4px 12px rgba(37,99,235,.3)}
.btn-primary:hover{background:#1d4ed8}
.btn-submit{background:linear-gradient(135deg,#059669,var(--green));color:#fff;box-shadow:0 4px 12px rgba(16,185,129,.3);font-size:13.5px;padding:11px 28px}
.btn-submit:hover{opacity:.9}
.btn:disabled{opacity:.4;cursor:not-allowed}

.review-table{border:1px solid var(--line);border-radius:8px;overflow:hidden;font-size:13px}
.review-row{display:grid;grid-template-columns:190px 1fr}
.review-row:nth-child(even) .review-key,.review-row:nth-child(even) .review-val{background:var(--surface)}
.review-key{padding:8px 14px;font-size:11px;font-weight:600;color:var(--muted);font-family:'IBM Plex Mono',monospace;border-right:1px solid var(--line);border-bottom:1px solid var(--line)}
.review-val{padding:8px 14px;color:var(--text);border-bottom:1px solid var(--line)}
.review-section-row{grid-column:1/-1;padding:7px 14px;font-size:9.5px;font-weight:700;text-transform:uppercase;letter-spacing:1.8px;color:var(--accent);background:rgba(245,158,11,.06);border-bottom:1px solid var(--line);font-family:'IBM Plex Mono',monospace}
.empty{color:#253d60;font-style:italic}

.success-screen{text-align:center;padding:60px 30px}
.success-screen .ico{font-size:60px;margin-bottom:18px}
.success-screen h2{font-size:22px;font-weight:700;color:var(--text);margin-bottom:10px}
.success-screen p{color:var(--muted);font-size:13px;max-width:400px;margin:0 auto 8px}
.file-pill{font-family:'IBM Plex Mono',monospace;font-size:11px;color:var(--accent);padding:6px 14px;border:1px solid rgba(245,158,11,.3);border-radius:4px;display:inline-block;margin:12px 0 24px}

.err-box{margin-top:12px;padding:11px 14px;background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.3);border-radius:5px;color:#fca5a5;font-size:12.5px}
.info-box{padding:12px 14px;background:rgba(37,99,235,.08);border:1px solid rgba(37,99,235,.2);border-radius:5px;color:var(--muted);font-size:12px;margin-bottom:16px}
.warn-box{padding:12px 14px;background:rgba(245,158,11,.07);border:1px solid rgba(245,158,11,.2);border-radius:5px;color:#d4a017;font-size:12px;margin-top:20px}

@keyframes spin{to{transform:rotate(360deg)}}
.spin{display:inline-block;width:14px;height:14px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:spin .7s linear infinite;vertical-align:middle;margin-right:7px}
</style>
</head>
<body>
<div class="shell">

<aside class="sidebar">
  <div class="logo">
    <div class="logo-badge">ğŸ‡ºğŸ‡¸ USCIS</div>
    <h1>Form I-129</h1>
    <p>Petition for Nonimmigrant Worker</p>
  </div>
  <div id="nav"></div>
</aside>

<main class="main">
  <div class="progress-bar"><div class="progress-fill" id="prog"></div></div>
  <div id="content"></div>
</main>

</div>
<script>
// â”€â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const STEPS = [
  {part:'Part 1',    title:'Petitioner Information',          sub:'Who is filing this petition?'},
  {part:'Part 2',    title:'Petition Information',             sub:'Classification and requested action'},
  {part:'Part 3',    title:'Beneficiary â€” Name & Other Names',sub:'Items 1â€“4: beneficiary identity'},
  {part:'Part 3',    title:'Beneficiary â€” Personal Info',      sub:'Items 5â€“7: DOB, sex, country, address'},
  {part:'Part 3',    title:'Beneficiary â€” U.S. Entry Info',   sub:'Item 6: passport, status, I-94, SEVIS'},
  {part:'Part 4',    title:'Processing Information',           sub:'Consulate and beneficiary foreign address'},
  {part:'Part 5',    title:'Employment Details',               sub:'Job, location, schedule and wages'},
  {part:'Part 5',    title:'Employer Information',             sub:'Business details and export control'},
  {part:'H Supp.',   title:'H Classification Supplement',     sub:'Prior H/L stays Â· duties Â· work experience Â· H-1B questions'},
  {part:'Data Coll.',title:'H-1B Data Collection Supplement', sub:'Education Â· employer info Â· fee exemption Â· cap determination'},
  {part:'Part 7',    title:'Signatory Information',            sub:'Authorized signatory name and contact'},
  {part:'',          title:'Review & Submit',                  sub:'Verify everything before generating the PDF'},
];

const STATES = ['AL','AK','AZ','AR','CA','CO','CT','DE','FL','GA','HI','ID','IL','IN','IA','KS','KY','LA','ME','MD','MA','MI','MN','MS','MO','MT','NE','NV','NH','NJ','NM','NY','NC','ND','OH','OK','OR','PA','RI','SC','SD','TN','TX','UT','VT','VA','WA','WV','WI','WY','DC'];

const STATUS_OPTS = ['F-1','F-2','H-1B','H-4','L-1A','L-1B','L-2','O-1A','O-1B','O-3','B-1','B-2','J-1','J-2','TN','OPT/EAD','CPT','Other'];

let step = 0, errHtml = '';

let F = {
  // Part 1
  petitionerType:'company',
  petLastName:'',petFirstName:'',petMiddleName:'',
  companyName:'',
  petInCareOf:'',petStreet:'',petApt:'',petCity:'',petState:'',petZip:'',
  petCountry:'United States',petProvince:'',petPostalCode:'',
  petPhone:'',petMobile:'',petEmail:'',
  fein:'',petIRS:'',petSSN:'',isNonprofit:'',
  // Part 2
  classification:'',basisForClassification:'new',
  priorReceiptNumber:'',totalWorkers:'1',requestedAction:'notify',
  // Part 3a â€“ name
  benLastName:'',benFirstName:'',benMiddleName:'',
  benOtherLast1:'',benOtherFirst1:'',benOtherMiddle1:'',
  benOtherLast2:'',benOtherFirst2:'',benOtherMiddle2:'',
  benOtherLast3:'',benOtherFirst3:'',benOtherMiddle3:'',
  // Part 3b â€“ personal
  benDob:'',benSex:'',
  benCountryBirth:'',benProvinceBirth:'',benCountryCitizenship:'',
  benANumber:'',benSSN:'',
  benStreet:'',benApt:'',benCity:'',benState:'',benZip:'',
  // Part 3c â€“ entry
  benPassportNumber:'',benPassportCountry:'',
  benPassportIssued:'',benPassportExpires:'',
  benCurrentStatus:'',benStatusExpires:'',
  benI94:'',benLastArrival:'',
  benSEVIS:'',benEAD:'',
  // Part 4
  officeType:'consulate',
  consultateCity:'',consultateCountry:'',
  benForeignStreet:'',benForeignApt:'',benForeignCity:'',
  benForeignProvince:'',benForeignPostal:'',benForeignCountry:'',
  // Part 5a â€“ employment
  jobTitle:'',lcaNumber:'',
  workStreet:'',workApt:'',workCity:'',workState:'',workZip:'',
  isThirdParty:'no',thirdPartyName:'',
  hasItinerary:'no',isOffsite:'no',isCNMI:'no',
  isFullTime:'yes',hoursPerWeek:'',
  wages:'',wagesPer:'year',otherComp:'',
  startDate:'',endDate:'',
  // Part 5b â€“ employer
  businessType:'',yearEstablished:'',numEmployees:'',
  grossIncome:'',netIncome:'',
  has25orFewer:'no',exportControl:'no_license',
  // H Classification Supplement (pages 13-14)
  hPriorStay1Class:'',hPriorStay1From:'',hPriorStay1To:'',
  hPriorStay2Class:'',hPriorStay2From:'',hPriorStay2To:'',
  hPriorStay3Class:'',hPriorStay3From:'',hPriorStay3To:'',
  hPriorStay4Class:'',hPriorStay4From:'',hPriorStay4To:'',
  hPriorStay5Class:'',hPriorStay5From:'',hPriorStay5To:'',
  hPriorStay6Class:'',hPriorStay6From:'',hPriorStay6To:'',
  hDuties:'',hWorkExperience:'',
  hBenControllingInterest:'no',hBenControllingExplain:'',
  hSubjectToGuam:'no',hChangeOfEmployer:'no',
  // H-1B Data Collection Supplement (pages 21-23)
  h1bDependentEmployer:'no',
  h1bWillfulViolator:'no',
  h1bExemptDOL:'no',
  h1b50orMore:'no',
  h1bMoreThan50pct:'no',
  h1bEducation:'',
  h1bFieldOfStudy:'',
  h1bDOTCode:'',
  h1bNAICSCode:'',
  h1bRateOfPay:'',
  h1bFeeExempt:'no',
  h1bNonprofit:'no',
  h1bCapExempt:'no',
  h1bCongressionallyMandated:'no',
  // Part 7
  sigLastName:'',sigFirstName:'',sigTitle:'',sigPhone:'',sigEmail:'',
};

// â”€â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function u(k,v){F[k]=v;}  // text inputs: update data only, no re-render
function ub(k,v){F[k]=v;renderStep();}  // buttons/selects: re-render needed
function esc(v){return String(v||'').replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/</g,'&lt;');}

function inp(key,ph='',type='text'){
  // Use data-key so we can set value once on mount; oninput silently updates F without re-render
  return `<input class="inp" type="${type}" data-key="${key}" placeholder="${ph}" oninput="u('${key}',this.value)" autocomplete="off">`;
}
function sel(key,opts,ph='Selectâ€¦'){
  let o=`<option value="">${ph}</option>`;
  opts.forEach(x=>{const v=typeof x==='string'?x:x.v,l=typeof x==='string'?x:x.l;o+=`<option value="${esc(v)}"${F[key]===v?' selected':''}>${l}</option>`;});
  return `<select class="inp" onchange="ub('${key}',this.value)">${o}</select>`;
}
function statesel(key){return sel(key,STATES,'State');}
function ynbtn(key){
  const y=F[key]==='yes',n=F[key]==='no';
  return `<div class="yn"><button class="yn-btn ${y?'yn-y':''}" onclick="ub('${key}','yes')">âœ“ Yes</button><button class="yn-btn ${n?'yn-n':''}" onclick="ub('${key}','no')">âœ— No</button></div>`;
}
function radio(key,opts){
  return `<div class="radio-group">${opts.map(o=>`<div class="radio-opt"><input type="radio" name="${key}_r" id="${key}_${o.v}" ${F[key]===o.v?'checked':''} onchange="ub('${key}','${o.v}')"><label for="${key}_${o.v}">${o.l}</label></div>`).join('')}</div>`;
}
function fld(label,content,hint='',req=false){
  return `<div class="field"><div class="field-label">${label}${req?'<span class="req">*</span>':''}</div>${hint?`<div class="field-hint">${hint}</div>`:''}${content}</div>`;
}
function sec(t){return `<div class="section-title">${t}</div>`;}
function g(cols,...fs){return `<div class="grid ${cols}">${fs.join('')}</div>`;}

// â”€â”€â”€ Step renderers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function renderS0(){ // Part 1
  const co=F.petitionerType==='company';
  return `
  ${sec('Items 1â€“2 Â· Legal Name of Petitioner')}
  ${fld('Petitioner type',radio('petitionerType',[{v:'company',l:'Company / Organization'},{v:'individual',l:'Individual'}]))}
  ${co
    ? fld('Item 2 Â· Company or Organization Name',inp('companyName','Acme Corporation'),'',true)
    : g('g3',fld('Family Name (Last)',inp('petLastName'),'',true),fld('Given Name (First)',inp('petFirstName'),'',true),fld('Middle Name',inp('petMiddleName')))
  }
  ${sec('Item 3 Â· Mailing Address')}
  ${fld('In Care of Name',inp('petInCareOf'),'If applicable')}
  ${g('g21',fld('Street Number and Name',inp('petStreet','123 Main Street'),'',true),fld('Apt / Suite / Floor #',inp('petApt')))}
  ${g('g211',fld('City or Town',inp('petCity'),'',true),fld('State',statesel('petState')),fld('ZIP Code',inp('petZip')))}
  ${g('g3',fld('Country',inp('petCountry','United States')),fld('Province',inp('petProvince'),'If outside U.S.'),fld('Postal Code',inp('petPostalCode'),'If outside U.S.'))}
  ${sec('Item 4 Â· Contact Information')}
  ${g('g3',fld('Daytime Telephone Number',inp('petPhone','2145550000'),'',true),fld('Mobile Telephone Number',inp('petMobile')),fld('Email Address',inp('petEmail','hr@company.com','email'),'',true))}
  ${sec('Items 5â€“8 Â· Other Information')}
  ${g('g3',fld('Item 5 Â· Federal Employer Identification Number (FEIN)',inp('fein','XX-XXXXXXX'),'From IRS',true),fld('Item 7 Â· IRS Individual Tax Number',inp('petIRS'),'Individual filers only'),fld('Item 8 Â· U.S. Social Security Number',inp('petSSN'),'Individual filers only'))}
  ${fld('Item 6 Â· Is petitioner a nonprofit/tax-exempt or governmental research organization?',ynbtn('isNonprofit'))}`;
}

function renderS1(){ // Part 2
  const cls=['H-1B Specialty Occupation','H-1B1 Chile/Singapore','H-2A Agricultural Worker','H-2B Non-agricultural Worker','H-3 Trainee','L-1A Manager/Executive','L-1B Specialized Knowledge','O-1A Extraordinary Ability (Sciences/Business/Athletics)','O-1B Extraordinary Ability (Arts/TV/Film)','E-1 Treaty Trader','E-2 Treaty Investor','TN Canada','TN Mexico','R-1 Religious Worker','Q-1 Cultural Exchange'];
  const basis=[{v:'new',l:'A. New Employment'},{v:'continuation',l:'B. Continuation with Same Employer (no change)'},{v:'change_prev',l:'C. Change in Previously Approved Employment'},{v:'concurrent',l:'D. New Concurrent Employment'},{v:'change_employer',l:'E. Change of Employer'},{v:'amended',l:'F. Amended Petition'}];
  const actions=[{v:'notify',l:'A. Notify consulate so beneficiary can obtain a visa'},{v:'change_extend',l:'B. Change status & extend stay (beneficiary in U.S.)'},{v:'extend',l:'C. Extend the stay'},{v:'amend',l:'D. Amend the stay'}];
  return `
  ${sec('Item 1 Â· Requested Nonimmigrant Classification')}
  ${fld('Classification symbol',sel('classification',cls,'Select classificationâ€¦'),'e.g. H-1B, L-1A, O-1A',true)}
  ${sec('Item 2 Â· Basis for Classification')}
  ${fld('Select the one that applies',sel('basisForClassification',basis,'Select basisâ€¦'),'',true)}
  ${sec('Item 3 Â· Prior Receipt Number')}
  ${fld('Most recent USCIS receipt number for this beneficiary',inp('priorReceiptNumber','None'),'Write "None" if no prior petition exists')}
  ${sec('Item 4 Â· Requested Action')}
  ${fld('What are you requesting USCIS to do?',sel('requestedAction',actions,'Select actionâ€¦'),'',true)}
  ${sec('Item 5 Â· Total Workers')}
  ${fld('Total number of workers included in this petition',inp('totalWorkers','1'))}`;
}

function renderS2(){ // Part 3 â€” Name + other names (Items 1â€“4)
  return `
  <div class="info-box">â„¹ï¸ <strong>Item 1:</strong> Named beneficiary (not unnamed). <strong>Item 3:</strong> Enter the beneficiary's legal name below as it appears on their passport.</div>
  ${sec('Item 3 Â· Legal Name of Beneficiary')}
  ${g('g3',fld('Family Name (Last)',inp('benLastName'),'',true),fld('Given Name (First)',inp('benFirstName'),'',true),fld('Middle Name',inp('benMiddleName')))}
  ${sec('Item 4 Â· All Other Names Used')}
  <div class="info-box" style="margin-bottom:12px">Include nicknames, aliases, maiden name, names from all previous marriages. Leave blank if none.</div>
  ${g('g3',fld('Last Name â€” Name 1',inp('benOtherLast1')),fld('First Name â€” Name 1',inp('benOtherFirst1')),fld('Middle Name â€” Name 1',inp('benOtherMiddle1')))}
  ${g('g3',fld('Last Name â€” Name 2',inp('benOtherLast2')),fld('First Name â€” Name 2',inp('benOtherFirst2')),fld('Middle Name â€” Name 2',inp('benOtherMiddle2')))}
  ${g('g3',fld('Last Name â€” Name 3',inp('benOtherLast3')),fld('First Name â€” Name 3',inp('benOtherFirst3')),fld('Middle Name â€” Name 3',inp('benOtherMiddle3')))}`;
}

function renderS3(){ // Part 3 â€” Personal info + US address (Items 5, 7)
  return `
  ${sec('Item 5 Â· Other Personal Information')}
  ${g('g2',fld('Date of Birth',inp('benDob','','date'),'MM/DD/YYYY',true),fld('Sex',radio('benSex',[{v:'male',l:'Male'},{v:'female',l:'Female'}])))}
  ${g('g2',fld('Country of Birth',inp('benCountryBirth'),'',true),fld('Province of Birth',inp('benProvinceBirth')))}
  ${fld('Country of Citizenship / Nationality',inp('benCountryCitizenship'),'',true)}
  ${g('g2',fld('Alien Registration Number (A-Number)',inp('benANumber'),'Format: AXXXXXXXXX â€” if any'),fld('U.S. Social Security Number',inp('benSSN'),'If any'))}
  ${sec('Item 7 Â· Current U.S. Residential Address (if beneficiary is in the U.S.)')}
  ${g('g21',fld('Street Number and Name',inp('benStreet')),fld('Apt / Suite / Floor #',inp('benApt')))}
  ${g('g211',fld('City or Town',inp('benCity')),fld('State',statesel('benState')),fld('ZIP Code',inp('benZip')))}`;
}

function renderS4(){ // Part 3 â€” U.S. Entry (Item 6)
  return `
  <div class="info-box">â„¹ï¸ <strong>Item 6:</strong> Complete this section only if the beneficiary is currently in the United States.</div>
  ${sec('Item 6 Â· Passport / Travel Document')}
  ${g('g2',fld('Passport or Travel Document Number',inp('benPassportNumber')),fld('Country of Issuance',inp('benPassportCountry')))}
  ${g('g2',fld('Date Passport Issued',inp('benPassportIssued','','date'),'MM/DD/YYYY'),fld('Date Passport Expires',inp('benPassportExpires','','date'),'MM/DD/YYYY'))}
  ${sec('Item 6 Â· Current Nonimmigrant Status')}
  ${g('g2',fld('Current Nonimmigrant Status',sel('benCurrentStatus',STATUS_OPTS,'Select statusâ€¦')),fld('Date Status Expires',inp('benStatusExpires','','date'),'MM/DD/YYYY â€” or type D/S'))}
  ${sec('Item 6 Â· Arrival Information')}
  ${g('g2',fld('I-94 Arrival-Departure Record Number',inp('benI94')),fld('Date of Last Arrival',inp('benLastArrival','','date'),'MM/DD/YYYY'))}
  ${sec('Item 6 Â· SEVIS / EAD Numbers')}
  ${g('g2',fld('SEVIS Number',inp('benSEVIS'),'N followed by 10 digits â€” if any'),fld('EAD Number (Employment Authorization Document)',inp('benEAD'),'If any'))}`;
}

function renderS5(){ // Part 4
  return `
  ${sec('Item 1A Â· Type of Office')}
  ${fld('Select the type of office to be notified',radio('officeType',[{v:'consulate',l:'Consulate'},{v:'preflight',l:'Pre-flight Inspection'},{v:'port',l:'Port of Entry'}]))}
  ${sec('Item 1Bâ€“C Â· Consulate or Inspection Facility')}
  ${g('g2',fld('City',inp('consultateCity'),'e.g. Mumbai, London',true),fld('Country or U.S. State',inp('consultateCountry'),'e.g. India, United Kingdom',true))}
  ${sec('Item 1D Â· Beneficiary\'s Foreign Address')}
  <div class="info-box">Beneficiary's home country address, if outside the U.S. Leave blank if beneficiary is in the U.S.</div>
  ${g('g21',fld('Street Number and Name',inp('benForeignStreet')),fld('Apt / Suite / Floor #',inp('benForeignApt')))}
  ${g('g211',fld('City or Town',inp('benForeignCity')),fld('Province / State',inp('benForeignProvince')),fld('Postal Code',inp('benForeignPostal')))}
  ${fld('Country',inp('benForeignCountry'))}`;
}

function renderS6(){ // Part 5a â€” Employment
  return `
  ${sec('Item 1â€“2 Â· Position')}
  ${g('g2',fld('Item 1 Â· Job Title',inp('jobTitle','Software Engineer'),'',true),fld('Item 2 Â· LCA or ETA Case Number',inp('lcaNumber','I-200-00000-000000'),'From Dept. of Labor'))}
  ${sec('Item 3 Â· Address Where Beneficiary Will Work')}
  <div class="info-box">Only complete if different from petitioner address in Part 1. Leave blank if the same.</div>
  ${g('g21',fld('Street Number and Name',inp('workStreet')),fld('Apt / Suite / Floor #',inp('workApt')))}
  ${g('g211',fld('City or Town',inp('workCity')),fld('State',statesel('workState')),fld('ZIP Code',inp('workZip')))}
  ${fld('Item 3 Â· Is this a third-party location?',ynbtn('isThirdParty'))}
  ${F.isThirdParty==='yes'?fld('Name of Third-Party Organization',inp('thirdPartyName'),'',true):''}
  ${sec('Items 4â€“6 Â· Logistics')}
  ${fld('Item 4 Â· Did you include an itinerary with this petition?',ynbtn('hasItinerary'))}
  ${fld('Item 5 Â· Will beneficiary work off-site at another company\'s or organization\'s location?',ynbtn('isOffsite'))}
  ${fld('Item 6 Â· Will beneficiary work exclusively in the Commonwealth of the Northern Mariana Islands (CNMI)?',ynbtn('isCNMI'))}
  ${sec('Items 7â€“11 Â· Employment Terms')}
  ${fld('Item 7 Â· Is this a full-time position?',ynbtn('isFullTime'))}
  ${F.isFullTime==='no'?fld('Item 8 Â· Hours per week',inp('hoursPerWeek','20'),'Required if part-time',true):''}
  ${g('g21',fld('Item 9 Â· Wages (dollar amount)',inp('wages','100000'),'',true),fld('Per',sel('wagesPer',[{v:'hour',l:'Hour'},{v:'week',l:'Week'},{v:'month',l:'Month'},{v:'year',l:'Year'}])))}
  ${fld('Item 10 Â· Other Compensation',inp('otherComp'),'Describe any bonuses, housing, or other compensation â€” leave blank if none')}
  ${g('g2',fld('Item 11 Â· Employment From Date',inp('startDate','','date'),'MM/DD/YYYY',true),fld('Employment To Date',inp('endDate','','date'),'MM/DD/YYYY',true))}`;
}

function renderS7(){ // Part 5b â€” Employer + export control
  return `
  ${sec('Items 12â€“17 Â· Employer Information')}
  ${g('g3',fld('Item 12 Â· Type of Business',inp('businessType','Information Technology'),'',true),fld('Item 13 Â· Year Established',inp('yearEstablished','2005')),fld('Item 14 Â· Current Number of U.S. Employees',inp('numEmployees','500')))}
  ${g('g2',fld('Item 16 Â· Gross Annual Income ($)',inp('grossIncome','50000000')),fld('Item 17 Â· Net Annual Income ($)',inp('netIncome','8000000')))}
  ${fld('Item 15 Â· Does your company currently employ 25 or fewer full-time equivalent employees in the U.S. (including affiliates/subsidiaries)?',radio('has25orFewer',[{v:'yes',l:'Yes â€” 25 or fewer'},{v:'no',l:'No â€” more than 25'}]))}
  ${sec('Part 6 Â· Export Control Certification')}
  <div class="info-box">Required for H-1B, H-1B1, L-1, and O-1A petitions only. Review Export Administration Regulations (EAR) and ITAR before selecting.</div>
  ${fld('With respect to technology or technical data to be released to the beneficiary, the petitioner certifies:',
    radio('exportControl',[
      {v:'no_license',l:'1. No license required from Dept. of Commerce or State'},
      {v:'license_req',l:'2. License is required â€” petitioner will prevent access until license is obtained'}
    ])
  )}`;
}


function ta(key, rows, ph) {
  return '<textarea class="inp" data-key="' + key + '" rows="' + rows + '" placeholder="' + ph + '" oninput="u(\'' + key + '\',this.value)"></textarea>';
}

function renderS8(){ // H Classification Supplement
  const rows_stay = [1,2,3,4,5,6].map(function(n){
    return '<div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;padding:8px 14px;border-top:1px solid var(--line)">' +
      inp('hPriorStay'+n+'Class','e.g. H-1B') +
      inp('hPriorStay'+n+'From','','date') +
      inp('hPriorStay'+n+'To','','date') +
    '</div>';
  }).join('');

  return `
  ${sec('Item 3 Â· Prior H or L Stays in the U.S. (Last 6 Years)')}
  <div class="info-box">List each period the beneficiary was in H or L status in the past 6 years. Leave blank if none.</div>
  <div style="border:1px solid var(--line);border-radius:6px;overflow:hidden;margin-bottom:16px">
    <div style="display:grid;grid-template-columns:1fr 1fr 1fr;background:var(--surface);padding:8px 14px;font-size:10px;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:1px;gap:12px">
      <span>Classification (H-1B, L-1A, etc.)</span><span>Date From</span><span>Date To</span>
    </div>
    ${rows_stay}
  </div>

  ${sec('Section 1 Â· H-1B â€” Proposed Duties & Work Experience')}
  ${fld('Item 1 Â· Describe the proposed duties', ta('hDuties',4,'Describe in detail the duties the beneficiary will perform in the U.S.'), 'Be specific â€” list day-to-day tasks and % of time on each', true)}
  ${fld('Item 2 Â· Beneficiary present occupation and summary of prior work experience', ta('hWorkExperience',4,'Describe current job title, employer, and summary of relevant prior work history'), '', true)}

  ${sec('Items 6â€“8 Â· Additional H Supplement Questions')}
  ${fld('Item 6 Â· Filing on behalf of a beneficiary subject to the Guam-CNMI visa waiver?', ynbtn('hSubjectToGuam'))}
  ${fld('Item 7 Â· Requesting a change of employer â€” was beneficiary previously in H status?', ynbtn('hChangeOfEmployer'))}
  ${fld('Item 8A Â· Does any beneficiary have a controlling interest in the petitioning organization?', ynbtn('hBenControllingInterest'))}
  ${F.hBenControllingInterest==='yes' ? fld('Item 8B Â· Explain beneficiary ownership interest', inp('hBenControllingExplain'), '', true) : ''}
  `;
}
function renderS9(){ // H-1B Data Collection Supplement
  const edu = [
    {v:'none',l:'No Diploma'},
    {v:'hs',l:'High School Diploma or Equivalent'},
    {v:'some_college',l:'Some College Credit, No Degree'},
    {v:'associates',l:"Associate's Degree"},
    {v:'bachelors',l:"Bachelor's Degree"},
    {v:'some_grad',l:'Some Graduate Work, No Degree'},
    {v:'masters',l:"Master's Degree"},
    {v:'professional',l:'Professional Degree (J.D., M.D., D.D.S., etc.)'},
    {v:'doctorate',l:'Doctorate Degree'},
  ];
  return `
  ${sec('Section 1A Â· Employer Information')}
  ${fld('1a Â· Is the petitioner an H-1B dependent employer?',ynbtn('h1bDependentEmployer'),
    'H-1B dependent = 25 or fewer FTE employees and 8+ H-1B workers, OR 26â€“50 FTE and 13+ H-1B workers, OR 51+ FTE and H-1B workers = 15%+ of workforce')}
  ${fld('1b Â· Has the petitioner ever been found to be a willful violator?',ynbtn('h1bWillfulViolator'))}
  ${fld('1c Â· Is the beneficiary an H-1B nonimmigrant exempt from Dept. of Labor attestation requirements?',ynbtn('h1bExemptDOL'),
    "Exempt if earning â‰¥ $60,000/year OR holds a master's degree or higher in the specialty")}
  ${fld('1d Â· Does the petitioner employ 50 or more individuals in the United States?',ynbtn('h1b50orMore'))}
  ${F.h1b50orMore==='yes'?fld('1d.1 Â· Are more than 50% of those U.S. employees in H-1B, L-1A, or L-1B status?',ynbtn('h1bMoreThan50pct')):''}

  ${sec("Section 1 Â· General Information â€” Item 2: Beneficiary's Highest Level of Education")}
  ${fld('Highest level of education completed',sel('h1bEducation',edu,'Select education levelâ€¦'),'',true)}
  ${fld('Major / Primary Field of Study',inp('h1bFieldOfStudy','e.g. Computer Science'),'',true)}

  ${sec('Section 1 Â· Items 4â€“6: Position Details')}
  ${g('g3',
    fld('Item 4 Â· Rate of Pay Per Year ($)',inp('h1bRateOfPay'),'Annual salary for this position'),
    fld('Item 5 Â· DOT Code',inp('h1bDOTCode'),'Dictionary of Occupational Titles code'),
    fld('Item 6 Â· NAICS Code',inp('h1bNAICSCode'),'North American Industry Classification System')
  )}

  ${sec('Section 2 Â· Fee Exemption and/or Determination')}
  <div class="info-box">Answer these to determine if the petitioner qualifies for an exemption from the $1,500/$750 training fee.</div>
  ${fld('Is the petitioner an institution of higher education, or a related/affiliated nonprofit?',ynbtn('h1bFeeExempt'))}
  ${fld('Is the petitioner a nonprofit research organization or governmental research organization?',ynbtn('h1bNonprofit'))}

  ${sec('Section 3 Â· Cap Determination')}
  ${fld('Is the beneficiary cap-exempt (works at/for a qualifying institution)?',ynbtn('h1bCapExempt'),
    "Cap-exempt if employed at institution of higher education, affiliated nonprofit, nonprofit research, or government research org")}
  ${fld('Is the petition congressionally mandated or filed for a returning worker?',ynbtn('h1bCongressionallyMandated'))}
  `;
}

function renderS10(){ // Part 7
  return `
  ${sec('Item 1 Â· Name and Title of Authorized Signatory')}
  <div class="info-box">The person signing this petition on behalf of the petitioner (not the preparer).</div>
  ${g('g3',fld('Family Name (Last)',inp('sigLastName'),'',true),fld('Given Name (First)',inp('sigFirstName'),'',true),fld('Title',inp('sigTitle','HR Manager, VP, etc.')))}
  ${sec('Item 3 Â· Signatory Contact Information')}
  ${g('g2',fld('Daytime Telephone Number',inp('sigPhone'),'',true),fld('Email Address',inp('sigEmail','','email'),'',true))}
  <div class="warn-box">
    <strong>ğŸ“ Handwritten Signature Required</strong><br>
    The PDF will be pre-filled with all the information above. After downloading, the authorized signatory must <strong>physically sign and date</strong> Part 7 (Item 2) before the form can be filed with USCIS.
  </div>`;
}

function renderS11(){ // Review
  const pName = F.petitionerType==='company'?F.companyName:[F.petLastName,F.petFirstName].filter(Boolean).join(', ');
  const bName = [F.benLastName,F.benFirstName,F.benMiddleName].filter(Boolean).join(', ');
  const rows=[
    ['PART 1 â€” PETITIONER'],
    ['Petitioner Type',F.petitionerType],['Name',pName],['FEIN',F.fein],
    ['Address',[F.petStreet,F.petApt,F.petCity,[F.petState,F.petZip].filter(Boolean).join(' '),F.petCountry].filter(x=>x&&x.trim()).join(', ')],
    ['Phone',F.petPhone],['Email',F.petEmail],['Nonprofit?',F.isNonprofit||'â€”'],
    ['PART 2 â€” PETITION'],
    ['Classification',F.classification],['Basis',F.basisForClassification],
    ['Requested Action',F.requestedAction],['Prior Receipt #',F.priorReceiptNumber||'None'],['Total Workers',F.totalWorkers],
    ['PART 3 â€” BENEFICIARY'],
    ['Legal Name',bName],['Date of Birth',F.benDob],['Sex',F.benSex],
    ['Country of Birth',F.benCountryBirth],['Province',F.benProvinceBirth],
    ['Citizenship',F.benCountryCitizenship],['A-Number',F.benANumber||'â€”'],['SSN',F.benSSN||'â€”'],
    ['U.S. Address',[F.benStreet,F.benApt,F.benCity,[F.benState,F.benZip].filter(Boolean).join(' ')].filter(x=>x&&x.trim()).join(', ')||'â€”'],
    ['Passport #',F.benPassportNumber||'â€”'],['Passport Country',F.benPassportCountry||'â€”'],
    ['Passport Issued',F.benPassportIssued||'â€”'],['Passport Expires',F.benPassportExpires||'â€”'],
    ['Current Status',F.benCurrentStatus||'â€”'],['Status Expires',F.benStatusExpires||'â€”'],
    ['I-94 Number',F.benI94||'â€”'],['Last Arrival',F.benLastArrival||'â€”'],
    ['SEVIS',F.benSEVIS||'â€”'],['EAD',F.benEAD||'â€”'],
    ['PART 4 â€” PROCESSING'],
    ['Office Type',F.officeType],['Consulate City',F.consultateCity],['Country',F.consultateCountry],
    ['Foreign Address',[F.benForeignStreet,F.benForeignCity,F.benForeignCountry].filter(Boolean).join(', ')||'â€”'],
    ['PART 5 â€” EMPLOYMENT'],
    ['Job Title',F.jobTitle],['LCA Number',F.lcaNumber],
    ['Work Location',[F.workStreet,F.workCity,[F.workState,F.workZip].filter(Boolean).join(' ')].filter(x=>x&&x.trim()).join(', ')||'Same as petitioner'],
    ['Third-party?',F.isThirdParty],['Itinerary?',F.hasItinerary],['Offsite?',F.isOffsite],
    ['Full-time?',F.isFullTime],['Hrs/week',F.isFullTime==='no'?F.hoursPerWeek:'â€”'],
    ['Wages',F.wages?'$'+F.wages+' / '+F.wagesPer:'â€”'],
    ['Start Date',F.startDate],['End Date',F.endDate],
    ['Business Type',F.businessType],['Year Est.',F.yearEstablished],
    ['# Employees',F.numEmployees],['Gross Income',F.grossIncome?'$'+F.grossIncome:'â€”'],['Net Income',F.netIncome?'$'+F.netIncome:'â€”'],
    ['25 or fewer?',F.has25orFewer],['Export Control',F.exportControl],
    ['PART 7 â€” SIGNATORY'],
    ['Signatory',[F.sigFirstName,F.sigLastName].filter(Boolean).join(' ')||'â€”'],
    ['Title',F.sigTitle||'â€”'],['Phone',F.sigPhone||'â€”'],['Email',F.sigEmail||'â€”'],
  ];

  const rowsHtml=rows.map(r=>{
    if(r.length===1) return `<div class="review-row"><div class="review-section-row">${r[0]}</div></div>`;
    const v=r[1]||'';
    return `<div class="review-row"><div class="review-key">${r[0]}</div><div class="review-val">${v?esc(v):`<span class="empty">â€”</span>`}</div></div>`;
  }).join('');

  return `
  <div style="margin-bottom:18px;padding:13px 16px;background:rgba(16,185,129,.07);border:1px solid rgba(16,185,129,.2);border-radius:6px;font-size:13px;color:var(--muted)">
    âœ… Review all information. Click <strong style="color:var(--text)">Generate Pre-filled I-129 PDF</strong> to fill the official USCIS form and download it instantly.
  </div>
  <div class="review-table">${rowsHtml}</div>`;
}

const renderers=[renderS0,renderS1,renderS2,renderS3,renderS4,renderS5,renderS6,renderS7,renderS8,renderS9,renderS10,renderS11];

// â”€â”€â”€ Nav â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderNav(){
  let last='';
  document.getElementById('nav').innerHTML=STEPS.map((s,i)=>{
    let ph='';
    if(s.part&&s.part!==last){ph=`<div class="part-header">${s.part}</div>`;last=s.part;}
    const cls=i===step?'active':i<step?'done':'';
    return `${ph}<button class="nav-item ${cls}" onclick="goStep(${i})"><span class="nav-num">${String(i+1).padStart(2,'0')}</span>${s.title}${i<step?'<span class="nav-check">âœ“</span>':''}</button>`;
  }).join('');
}

function renderStep(){
  document.getElementById('prog').style.width=(step/(STEPS.length-1)*100)+'%';
  const s=STEPS[step],isLast=step===STEPS.length-1,isFirst=step===0;
  document.getElementById('content').innerHTML=`
    <div class="step-header">
      <div class="step-badge">${s.part||'Final Review'}</div>
      <div class="step-title">${s.title}</div>
      <div class="step-sub">${s.sub}</div>
    </div>
    ${renderers[step]()}
    ${errHtml}
    <div class="nav-btns">
      <button class="btn btn-ghost" onclick="goStep(${step-1})" ${isFirst?'disabled':''}>â† Previous</button>
      ${isLast
        ?`<button class="btn btn-submit" onclick="submitForm()" id="sub">ğŸ“¥ Generate Pre-filled I-129 PDF</button>`
        :`<button class="btn btn-primary" onclick="goStep(${step+1})">Next â†’</button>`
      }
    </div>`;
  renderNav();
  restoreInputValues();
}

function restoreInputValues(){
  document.querySelectorAll('input[data-key]').forEach(el=>{
    const k=el.getAttribute('data-key');
    if(F[k]!==undefined) el.value=F[k];
  });
}
function goStep(i){if(i<0||i>=STEPS.length)return;step=i;errHtml='';renderStep();window.scrollTo({top:0,behavior:'smooth'});}

// â”€â”€â”€ Submit â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function submitForm(){
  const btn=document.getElementById('sub');
  btn.disabled=true;btn.innerHTML='<span class="spin"></span>Generating PDFâ€¦';errHtml='';

  try{
    const res=await fetch('https://web-production-81f11.up.railway.app/fill',{
      method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(F)
    });
    const ct=res.headers.get('content-type')||'';
    if(!res.ok){
      let msg=`Server error (HTTP ${res.status})`;
      try{if(ct.includes('json')){const j=await res.json();msg=j.error||msg;}else{msg=(await res.text()).slice(0,200)||msg;}}catch(_){}
      throw new Error(msg);
    }
    if(!ct.includes('pdf')){throw new Error('Server returned unexpected response: '+(await res.text()).slice(0,200));}
    const blob=await res.blob();
    if(blob.size<1000)throw new Error('PDF too small â€” server may have failed silently. Check Railway logs.');
    const ben=[F.benFirstName,F.benLastName].filter(Boolean).join('_')||'form';
    const name=`I-129_${ben}.pdf`;
    const url=URL.createObjectURL(blob);
    const a=document.createElement('a');a.href=url;a.download=name;a.click();URL.revokeObjectURL(url);
    document.getElementById('content').innerHTML=`
      <div class="success-screen">
        <div class="ico">ğŸ“¥</div>
        <h2>PDF Downloaded!</h2>
        <p>The official USCIS I-129 has been pre-filled and saved to your device.</p>
        <div class="file-pill">${name}</div>
        <p>Open in Adobe Acrobat to review all fields. The authorized signatory must physically sign and date Part 7 (Item 2) before filing with USCIS.</p>
        <br><button class="btn btn-ghost" style="margin-top:16px" onclick="location.reload()">â†© Start New Form</button>
      </div>`;
  }catch(e){
    errHtml=`<div class="err-box">âš ï¸ ${esc(e.message)}</div>`;
    renderStep();
    document.getElementById('sub').disabled=false;
    document.getElementById('sub').innerHTML='ğŸ“¥ Generate Pre-filled I-129 PDF';
  }
}

renderStep();
</script>
</body>
</html>
